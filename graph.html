
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>タイピングスコア グラフ</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: sans-serif;
    margin: 0;
    padding: 0;
  }


    nav {
      background-color: #004466;
      padding: 10px;
      color: white;
    }
    nav a {
      color: white;
      text-decoration: none;
      margin-right: 15px;
      font-weight: bold;
      font-size: 11.7px;
    }
  .content {
    padding: 20px;
  }
  #controls {
    margin-bottom: 10px;
  }

  #scoreChart {
    max-width: 800px;
    width: 100%;
    height: 280px;
    margin: 0 auto;
  }

</style>
</head>
<body>
<nav>
  <a href="index.html">一覧</a>
  <a href="graph.html">グラフ</a>
</nav>

<div class="content">
  <h2 id="graphTitle">日別グラフ</h2>

  <div id="controls">
    <label for="viewMode">表示モード:</label>
    <select id="viewMode" onchange="updateChart()">
      <option value="daily">日別</option>
      <option value="weekly">週別</option>
      <option value="monthly">月別</option>
    </select>
  </div>

  <canvas id="scoreChart"></canvas>
</div>

<script>
const dataSrc = {
  daily: {
    labels: ['2025/01/23', '2025/01/24', '2025/01/25', '2025/01/26', '2025/01/27', '2025/01/28', '2025/01/29', '2025/01/30', '2025/01/31', '2025/02/01', '2025/02/02', '2025/02/03', '2025/02/04', '2025/02/05', '2025/02/06', '2025/02/07', '2025/02/08', '2025/02/09', '2025/02/10', '2025/02/11', '2025/02/12', '2025/02/16', '2025/02/17', '2025/02/18', '2025/02/19', '2025/02/20', '2025/02/21', '2025/02/22', '2025/02/24', '2025/02/25', '2025/02/26', '2025/02/27', '2025/02/28', '2025/03/01', '2025/03/02', '2025/03/03', '2025/03/04', '2025/03/05', '2025/03/06', '2025/03/07', '2025/03/08', '2025/03/09', '2025/03/10', '2025/03/11', '2025/03/12', '2025/03/13', '2025/03/14', '2025/03/15', '2025/03/16', '2025/03/17', '2025/03/19', '2025/03/20', '2025/03/21', '2025/03/22', '2025/03/23', '2025/03/24', '2025/03/25', '2025/03/26', '2025/03/27', '2025/03/28', '2025/03/29', '2025/03/30', '2025/04/01', '2025/04/04', '2025/04/05', '2025/04/06', '2025/04/07', '2025/04/08', '2025/04/09', '2025/04/11', '2025/04/12', '2025/04/13', '2025/04/14', '2025/04/15', '2025/04/16', '2025/04/17', '2025/04/18', '2025/04/19', '2025/04/20', '2025/04/22', '2025/04/23', '2025/04/24', '2025/04/25', '2025/04/26', '2025/04/27', '2025/04/28', '2025/04/29', '2025/04/30', '2025/05/01', '2025/05/02', '2025/05/03', '2025/05/04', '2025/05/05', '2025/05/06', '2025/05/07', '2025/05/08', '2025/05/09', '2025/05/10', '2025/05/11', '2025/05/12', '2025/05/13', '2025/05/14', '2025/05/15', '2025/05/16', '2025/05/17', '2025/05/18', '2025/05/19', '2025/05/20', '2025/05/22', '2025/05/23', '2025/05/24', '2025/05/25', '2025/05/26', '2025/05/27', '2025/05/28', '2025/05/30', '2025/05/31', '2025/06/01', '2025/06/02', '2025/06/03', '2025/06/04', '2025/06/05', '2025/06/06', '2025/06/07', '2025/06/08', '2025/06/09', '2025/06/10', '2025/06/11', '2025/06/12', '2025/06/13', '2025/06/14', '2025/06/15', '2025/06/16', '2025/06/18', '2025/06/20', '2025/06/22', '2025/06/23', '2025/06/25', '2025/06/26', '2025/06/27', '2025/06/29', '2025/06/30', '2025/07/02', '2025/07/03'],
    scores: [405.0, 433.0, 426.0, 424.0, 454.0, 484.0, 418.0, 447.0, 432.0, 458.0, 461.0, 483.0, 479.0, 503.0, 490.0, 448.0, 470.0, 428.0, 469.0, 440.0, 461.0, 490.0, 471.0, 486.0, 510.0, 446.0, 501.0, 498.0, 475.0, 485.0, 464.0, 488.0, 457.0, 460.0, 481.0, 489.0, 513.0, 493.0, 482.0, 460.0, 470.0, 515.0, 472.0, 476.0, 478.0, 499.0, 479.0, 519.0, 495.0, 501.0, 489.0, 461.0, 461.0, 478.0, 488.0, 497.0, 482.0, 468.0, 533.0, 498.0, 504.0, 496.0, 501.0, 486.0, 478.0, 471.0, 495.0, 441.0, 448.0, 505.0, 458.0, 482.0, 489.0, 471.0, 472.0, 502.0, 487.0, 480.0, 527.0, 474.0, 493.0, 490.0, 489.0, 493.0, 503.0, 495.0, 469.0, 461.0, 475.0, 504.0, 463.0, 482.0, 481.0, 486.0, 485.0, 508.0, 423.0, 505.0, 477.0, 466.0, 493.0, 495.0, 502.0, 487.0, 475.0, 437.0, 486.0, 480.0, 462.0, 419.0, 534.0, 522.0, 495.0, 505.0, 530.0, 460.0, 465.0, 504.0, 485.0, 477.0, 484.0, 503.0, 488.0, 492.0, 496.0, 519.0, 476.0, 551.0, 529.0, 488.0, 484.0, 505.0, 504.0, 500.0, 506.0, 485.0, 467.0, 486.0, 482.0, 483.0, 473.0, 501.0, 462.0, 484.0]
  },
  weekly: {
    labels: ['2025/01/20', '2025/01/27', '2025/02/03', '2025/02/10', '2025/02/17', '2025/02/24', '2025/03/03', '2025/03/10', '2025/03/17', '2025/03/24', '2025/03/31', '2025/04/07', '2025/04/14', '2025/04/21', '2025/04/28', '2025/05/05', '2025/05/12', '2025/05/19', '2025/05/26', '2025/06/02', '2025/06/09', '2025/06/16', '2025/06/23', '2025/06/30'],
    scores: [422.0, 450.6, 471.6, 465.0, 485.3, 472.9, 488.9, 488.3, 479.7, 496.9, 484.0, 471.5, 489.7, 490.3, 478.4, 480.7, 479.3, 483.8, 493.2, 489.3, 507.4, 498.8, 478.2, 482.3]
  },
  monthly: {
    labels: ['2025-01', '2025-02', '2025-03', '2025-04', '2025-05', '2025-06', '2025-07'],
    scores: [435.9, 473.4, 487.5, 483.1, 482.8, 494.7, 473.0]
  }
};

let chart = null;

function buildConfig(mode) {
  return {
    type: 'line',
    data: {
      labels: dataSrc[mode].labels,
      datasets: [{
        label: 'スコア',
        data: dataSrc[mode].scores,
        borderColor: 'rgba(0, 123, 255, 1)',
        backgroundColor: 'rgba(0, 123, 255, 0.15)',
        tension: 0.3,
        pointRadius: 3
      }]
    },
    options: {
      responsive: true,
      interaction: {
        mode: 'index',
        intersect: false
      },
      plugins: {
        legend: {
          onClick: null  // クリックで線が消えないように
        },
        title: {
          display: true,
          text: modeTitle(mode)
        }
      },
      scales: {
        y: {
          beginAtZero: false,
          suggestedMin: 400,
          suggestedMax: 550
        }
      }
    }
  };
}

function modeTitle(mode) {
  if (mode === 'daily') return '日別グラフ';
  if (mode === 'weekly') return '週別グラフ';
  return '月別グラフ';
}

function updateChart() {
  const mode = document.getElementById('viewMode').value;
  const ctx = document.getElementById('scoreChart').getContext('2d');
  if (chart) chart.destroy();
  chart = new Chart(ctx, buildConfig(mode));
  document.getElementById('graphTitle').innerText = modeTitle(mode);
}

window.onload = updateChart;
</script>
</body>
</html>
